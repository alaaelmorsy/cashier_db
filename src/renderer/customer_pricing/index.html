<!doctype html>
<html lang="ar" dir="rtl">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>ุชุฎุตูุต ุงูุฃุณุนุงุฑ - POS SA</title>
    <link rel="stylesheet" href="../tailwind-output.css">
    <style>
      @font-face {
        font-family: 'Cairo';
        src: url('../../../assets/fonts/Cairo-Regular.ttf') format('truetype');
        font-weight: 400;
        font-style: normal;
      }
      @font-face {
        font-family: 'Cairo';
        src: url('../../../assets/fonts/Cairo-Medium.ttf') format('truetype');
        font-weight: 500;
        font-style: normal;
      }
      @font-face {
        font-family: 'Cairo';
        src: url('../../../assets/fonts/Cairo-SemiBold.ttf') format('truetype');
        font-weight: 600;
        font-style: normal;
      }
      @font-face {
        font-family: 'Cairo';
        src: url('../../../assets/fonts/Cairo-Bold.ttf') format('truetype');
        font-weight: 700;
        font-style: normal;
      }
      * {
        font-family: 'Cairo', system-ui, -apple-system, sans-serif;
      }
      .error:empty { display:none; }
      dialog {
        border: none;
        border-radius: 16px;
        padding: 0;
        width: min(95vw, 700px);
        background: #fff;
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%) !important;
        margin: 0 !important;
        max-height: 90vh;
        overflow-y: auto;
      }
      #confirmDlg {
        max-width: 420px;
        width: min(95vw, 420px);
      }
    </style>
  </head>
  <body class="bg-gray-50">
    <header class="sticky top-0 z-10 flex items-center justify-between px-6 py-4 bg-white border-b border-gray-200">
      <div class="text-xl font-semibold text-gray-800">๐ฐ ุชุฎุตูุต ุงูุฃุณุนุงุฑ ููุนููุงุก</div>
      <nav>
        <button class="px-5 py-2.5 bg-slate-600 text-white rounded-lg font-medium" id="backBtn">โฌ ุงูุนูุฏุฉ</button>
      </nav>
    </header>

    <div class="max-w-7xl mx-auto my-6 px-4">
      <div class="flex flex-wrap gap-3 mb-4 items-center justify-between bg-white border border-gray-200 rounded-lg p-4">
        <input id="searchBox" placeholder="๐ ุจุญุซ ุนู ุนูููุ ููุชุฌุ ุฌูุงู ุฃู ุจุงุฑููุฏ..." class="flex-1 min-w-[250px] px-4 py-3 border border-gray-300 rounded-lg" />
        <div class="flex gap-2 flex-wrap">
          <button class="px-5 py-2.5 bg-blue-600 text-white rounded-lg font-medium" id="searchBtn">๐ ุจุญุซ</button>
          <button class="px-5 py-2.5 bg-blue-600 text-white rounded-lg font-medium" id="addBtn">โ ุฅุถุงูุฉ ุชุฎุตูุต ุฌุฏูุฏ</button>
        </div>
      </div>

      <div id="error" class="error text-red-700 bg-red-50 border border-red-200 px-4 py-2.5 rounded-lg min-h-[22px] my-2 text-center font-medium"></div>

      <div class="overflow-hidden rounded-lg border border-gray-200">
        <table class="w-full bg-white">
          <thead>
            <tr class="bg-blue-50">
              <th class="px-4 py-3 text-center text-sm font-bold text-blue-900 border-b border-gray-200">#</th>
              <th class="px-4 py-3 text-right text-sm font-bold text-blue-900 border-b border-gray-200">๐ค ุงูุนููู</th>
              <th class="px-4 py-3 text-right text-sm font-bold text-blue-900 border-b border-gray-200">๐ฆ ุงูููุชุฌ</th>
              <th class="px-4 py-3 text-center text-sm font-bold text-blue-900 border-b border-gray-200">โ๏ธ ุงูุนูููุฉ</th>
              <th class="px-4 py-3 text-center text-sm font-bold text-blue-900 border-b border-gray-200">๐ฐ ุงูุชุฎุตูุต</th>
              <th class="px-4 py-3 text-center text-sm font-bold text-blue-900 border-b border-gray-200">๐ง ุฅุฌุฑุงุกุงุช</th>
            </tr>
          </thead>
          <tbody id="rulesTbody">
            <tr>
              <td colspan="6" class="text-center py-10 text-gray-500">
                โณ ุฌุงุฑู ุชุญููู ุงูุจูุงูุงุช...
              </td>
            </tr>
          </tbody>
        </table>
      </div>
      
      <div class="bg-white border border-gray-200 rounded-lg p-4 mt-4">
        <div class="flex items-center gap-2 mb-2">
          <span class="text-lg">๐ก</span>
          <strong class="text-gray-800">ูุตุงุฆุญ ูููุฏุฉ:</strong>
        </div>
        <div class="text-sm text-gray-600 leading-relaxed">
          โข ููููู ุชุฎุตูุต <strong>ุณุนุฑ ููุฏู ุซุงุจุช</strong> ุฃู <strong>ุฎุตู ูุณุจุฉ ูุฆููุฉ</strong> ุนูู ุงูุณุนุฑ ุงูุฃุณุงุณู<br>
          โข ุนูุฏ ุงุฎุชูุงุฑ ุนูููุฉ ูุญุฏุฏุฉุ ุณูุชู ุชุทุจูู ุงูุชุฎุตูุต ุนูู ุชูู ุงูุนูููุฉ ููุท<br>
          โข ุจุฏูู ุชุญุฏูุฏ ุนูููุฉุ ุณููุทุจู ุงูุชุฎุตูุต ุนูู ุงูููุชุฌ ุจุดูู ุนุงู ููุฐุง ุงูุนููู
        </div>
      </div>
    </div>

    <dialog id="dlg">
      <div class="px-5 py-4 bg-blue-600 text-white text-lg font-bold rounded-t-lg">
        <span id="dlgTitle">โจ ุฅุถุงูุฉ/ุชุนุฏูู ุชุฎุตูุต ุณุนุฑ</span>
      </div>
      <div class="p-6 space-y-5">
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
          <div class="relative">
            <label class="block text-sm font-semibold text-gray-700 mb-2">๐ค ุงูุนููู ุงููุณุชูุฏู</label>
            <input id="custSearch" placeholder="ุงุจุญุซ ุจุงูุงุณู ุฃู ุฑูู ุงูุฌูุงู..." class="w-full px-4 py-2.5 border border-gray-300 rounded-lg" />
            <div id="custSuggest" class="absolute z-50 left-0 right-0 top-full bg-white border border-gray-200 rounded-lg max-h-60 overflow-auto hidden mt-1"></div>
            <div id="custSelected" class="hidden mt-2 bg-green-100 text-green-800 px-3 py-2 rounded-lg text-sm"></div>
          </div>
          
          <div class="relative md:col-span-2">
            <label class="block text-sm font-semibold text-gray-700 mb-2">๐ฆ ุงูููุชุฌุงุช ุงููุณุชูุฏูุฉ (ูููู ุฅุถุงูุฉ ุฃูุซุฑ ูู ููุชุฌ)</label>
            <div class="flex gap-2">
              <div class="flex-1 relative">
                <input id="prodSearch" placeholder="ุงุจุญุซ ุจุงูุงุณู ุฃู ุงูุจุงุฑููุฏ..." class="w-full px-4 py-2.5 border border-gray-300 rounded-lg" />
                <div id="prodSuggest" class="absolute z-50 left-0 right-0 top-full bg-white border border-gray-200 rounded-lg max-h-60 overflow-auto hidden mt-1"></div>
              </div>
              <button id="addProductBtn" class="px-4 py-2.5 bg-green-600 text-white rounded-lg font-medium whitespace-nowrap">โ ุฅุถุงูุฉ</button>
            </div>
            <div id="selectedProductsList" class="mt-3 space-y-2 max-h-40 overflow-y-auto"></div>
          </div>
          
          <div class="md:col-span-2">
            <label class="block text-sm font-semibold text-gray-700 mb-2">๐ฐ ููุน ุงูุชุฎุตูุต</label>
            <select id="modeSelect" class="w-full px-4 py-2.5 border border-gray-300 rounded-lg">
              <option value="cash">๐ต ุณุนุฑ ููุฏู ุซุงุจุช</option>
              <option value="percent">๐ ุฎุตู ูุณุจุฉ ูุฆููุฉ</option>
            </select>
            <p class="text-xs text-gray-500 mt-1">ุณูุชู ุชุทุจูู ูุฐุง ุงูููุน ุนูู ุฌููุน ุงูููุชุฌุงุช ูุงูุนูููุงุช ุงููุญุฏุฏุฉ</p>
          </div>
        </div>
        
        <div id="previewSection" class="hidden bg-green-50 border border-green-200 p-4 rounded-lg">
          <div class="flex items-center gap-2 mb-2">
            <span>๐๏ธ</span>
            <strong class="text-green-800">ูุนุงููุฉ ุงูุชุฎุตูุต:</strong>
          </div>
          <div id="previewContent" class="text-sm text-gray-600"></div>
        </div>
        
        <div class="bg-yellow-50 border border-yellow-200 p-3 rounded-lg">
          <div class="text-sm text-gray-700">
            <strong class="text-gray-800">๐ ููุงุญุธุงุช ูููุฉ:</strong><br>
            โข ููููู ุฅุถุงูุฉ ุฃูุซุฑ ูู ููุชุฌ ูู ููุณ ุงูุชุฎุตูุต<br>
            โข ููููู ุชุญุฏูุฏ ุณุนุฑ/ุฎุตู ูุฎุชูู ููู ุนูููุฉ ูู ุนูููุงุช ุงูููุชุฌ<br>
            โข ุงุชุฑู ุงูุนูููุฉ ูุงุฑุบุฉ ูุชุทุจูู ุงูุณุนุฑ ุงูุนุงู ุนูู ุงูููุชุฌ ูุงููุงู<br>
            โข ุงูุณุนุฑ ุงูููุฏู: ูุญู ูุญู ุงูุณุนุฑ ุงูุฃุตูู ุชูุงูุงู<br>
            โข ุงูุฎุตู ุงููุณุจู: ูุชู ุชุทุจููู ุนูู ุงูุณุนุฑ ุงูุฃุณุงุณู (ุณุนุฑ ุงูุนูููุฉ ุฃู ุณุนุฑ ุงูููุชุฌ)
          </div>
        </div>
        
        <div class="flex gap-3 justify-end pt-2">
          <button id="dlgCancel" class="px-5 py-2.5 bg-gray-500 text-white rounded-lg font-medium">โ ุฅูุบุงุก</button>
          <button id="dlgSave" class="px-5 py-2.5 bg-blue-600 text-white rounded-lg font-medium">๐พ ุญูุธ ุงูุชุฎุตูุต</button>
        </div>
      </div>
    </dialog>

    <dialog id="confirmDlg">
      <div class="px-5 py-4 bg-red-600 text-white text-lg font-bold rounded-t-lg flex items-center gap-2">
        <span id="confirmHeaderIcon">โ๏ธ</span>
        <span id="confirmTitle">ุชุฃููุฏ</span>
      </div>
      <div class="p-6 space-y-4">
        <div class="flex gap-3">
          <div class="text-3xl" id="confirmIcon">โ</div>
          <div class="text-gray-800 text-base leading-relaxed" id="confirmText"></div>
        </div>
        <div class="flex gap-3 justify-end pt-2">
          <button id="confirmCancel" class="px-5 py-2.5 bg-gray-500 text-white rounded-lg font-medium">ุฅูุบุงุก</button>
          <button id="confirmOk" class="px-5 py-2.5 bg-slate-600 text-white rounded-lg font-medium">ููุงูู</button>
        </div>
      </div>
    </dialog>
    <script src="../appointment-notifications.js"></script>

    <script src="../theme.js"></script>
    <script src="./renderer.js"></script>
  </body>
</html>