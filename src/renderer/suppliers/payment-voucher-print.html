<!doctype html>
<html lang="ar" dir="rtl">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Ø³Ù†Ø¯ ØµØ±Ù A4</title>
    <style>
      @font-face{
        font-family: 'Cairo';
        src: url('../../../assets/fonts/Cairo-Black.ttf') format('truetype');
        font-weight: 900;
        font-display: swap;
      }
      @font-face{
        font-family: 'saudi_riyal';
        src: url('../../../assets/fonts/saudi-riyal.woff') format('woff'),
             url('../../../assets/fonts/saudi-riyal.ttf') format('truetype');
        font-display: swap;
        unicode-range: U+E900;
      }
      
      .currency-symbol{ font-family:'Cairo', 'saudi_riyal', system-ui, -apple-system, Segoe UI, Roboto, "Noto Kufi Arabic", Arial, sans-serif; font-size:1.15em; line-height:0; vertical-align:-0.05em; margin:0 2px; }
      
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }
      
      body{ 
        font-family: 'Cairo', 'saudi_riyal', system-ui, -apple-system, Segoe UI, Roboto, "Noto Kufi Arabic", Arial, sans-serif; 
        background: #f8fafc;
        color: #000; 
        font-weight: 900;
        font-size: 14px;
        line-height: 1.6;
      }
      
      .page{ 
        width: 210mm; 
        min-height: 297mm; 
        margin: 20px auto; 
        padding: 10mm 8mm;
        background: white;
        box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      }

      .brand-header{
        display:grid;
        grid-template-columns: 1fr auto 1fr;
        align-items:start;
        gap:10px;
        margin-bottom:10px;
      }
      .brand-center{ text-align:center; margin-top:20px; }
      .brand-center img{ width:65px; height:65px; object-fit:contain; border-radius:8px; background:#fff; border:1px solid #cbd5e1; }
      .brand-name{ font-size:18px; font-weight:900; margin-top:3px; }
      .company-box{ background:#eef2ff; border:1px solid #cbd5e1; border-radius:8px; padding:6px; }
      .company-box .row{ display:grid; gap:3px; font-weight:800; color:#0f172a; }
      .company-box .muted{ color:#334155; font-weight:700; font-size:11px; }
      .side-info{ display:grid; gap:4px; align-content: start; }
      .side-info .cell{ display:flex; justify-content:space-between; gap:8px; min-height:32px; align-items:center; background:linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%); border:3px solid #000000; border-radius:6px; padding:6px 10px; font-weight:900; font-size:13px; box-shadow: 0 1px 3px rgba(0,0,0,0.08); }
      .side-info .label{ color:#000000; font-size:12px; font-weight:900; }
      .side-info .cell div:last-child{ color:#000000; font-weight:900; }
      .title-line{ text-align:center; margin:5px 0 10px; padding:8px 0; border-top:3px solid #000000; border-bottom:3px solid #000000; background:linear-gradient(to right, transparent, #fee2e2 20%, #fee2e2 80%, transparent); font-weight:900; color:#000000; font-size:18px; }
      .content-grid{ display:grid; grid-template-columns: 1fr; gap:12px; }
      .amount-box{ background:linear-gradient(135deg, #fef3c7 0%, #fde68a 100%); border:3px solid #000000; border-radius:10px; padding:15px; text-align:center; box-shadow: 0 4px 6px rgba(0, 0, 0, 0.15); }
      .amount-box .label{ color:#92400e; font-weight:900; font-size:14px; margin-bottom:8px; }
      .amount-box .value{ font-size:42px; font-weight:900; color:#78350f; margin:8px 0; letter-spacing:1px; text-shadow: 0 2px 4px rgba(0,0,0,0.1); }
      .amount-box .currency{ color:#92400e; font-weight:900; font-size:15px; }
      .fields{ background:linear-gradient(to bottom, #ffffff, #f8fafc); border:3px solid #000000; border-radius:10px; padding:12px; box-shadow: 0 2px 8px rgba(0,0,0,0.05); }
      .fields .row-header{ display:flex; justify-content:space-between; gap:12px; padding:10px 12px; margin-bottom:10px; background:linear-gradient(135deg, #fee2e2 0%, #fecaca 100%); border:3px solid #000000; border-radius:8px; font-weight:900; font-size:15px; box-shadow: 0 2px 4px rgba(239, 68, 68, 0.1); }
      .fields .row-header .label{ color:#000000; font-size:14px; font-weight:900; }
      .fields .row-header div:last-child{ color:#000000; font-weight:900; }
      .fields .grid-container{
        display:grid;
        grid-template-columns: 1fr 1fr;
        gap:0;
        border:2px solid #000000;
        border-radius:8px;
        overflow:hidden;
        background:#ffffff;
      }
      .fields .row{
        display:flex; justify-content:space-between; gap:10px;
        padding:10px 12px;
        background:#fbfdff;
        border-top:1px solid #e2e8f0;
        font-weight:900; font-size:13px; transition: background 0.2s;
      }
      .fields .grid-container .row:nth-child(odd){ border-inline-end:1px solid #e2e8f0; }
      .fields .grid-container .row:nth-child(-n+2){ border-top:0; }
      .fields .row:hover{ background:#f1f5f9; }
      .fields .label{ color:#000000; min-width:120px; font-size:12px; font-weight:900; }
      .fields .row div:last-child{ color:#000000; font-weight:900; }
      .signature{ display:grid; grid-template-columns: repeat(3,1fr); gap:20px; margin-top:20px; }
      .signature .box{ text-align:center; font-size:13px; font-weight:900; color:#334155; }
      .signature .line{ height:50px; border-bottom:3px solid #000000; margin-bottom:5px; }
      .footer-mini{ margin-top:15px; padding-top:10px; border-top:2px dashed #cbd5e1; color:#64748b; font-size:11px; font-weight:700; text-align:center; }

      .btn-container {
        position: fixed;
        top: 12px;
        left: 12px;
        z-index: 1000;
        display: flex;
        flex-direction: column;
        gap: 8px;
      }

      .btn {
        padding: 12px 24px;
        border: none;
        border-radius: 8px;
        font-size: 14px;
        font-weight: 700;
        cursor: pointer;
        font-family: inherit;
        box-shadow: 0 2px 8px rgba(0,0,0,0.15);
        transition: all 0.2s;
      }

      .btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(0,0,0,0.2);
      }

      .btn-print {
        background: #dc2626;
        color: white;
      }

      .btn-export {
        background: #f59e0b;
        color: white;
      }

      .btn-close {
        background: #64748b;
        color: white;
      }

      @media print {
        @page { 
          size: A4; 
          margin: 8mm; 
        }
        
        body {
          background: white;
        }
        
        .btn-container { 
          display: none !important; 
        }
        
        .page { 
          width: 100%; 
          margin: 0;
          padding: 8mm;
          box-shadow: none;
          min-height: auto;
        }
      }
    </style>
  </head>
  <body>
    <div class="btn-container">
      <button class="btn btn-print" onclick="window.print()">Ø¥Ø¹Ø§Ø¯Ø© Ø·Ø¨Ø§Ø¹Ø©</button>
      <button class="btn btn-export" id="exportBtn">ØªØµØ¯ÙŠØ± PDF</button>
      <button class="btn btn-close" onclick="window.close()">Ø¥ØºÙ„Ø§Ù‚</button>
    </div>

    <div class="page">
      <div class="brand-header">
        <div class="side-info">
          <div class="cell"><div class="label">Ø§Ù„ØªØ§Ø±ÙŠØ®</div><div id="voucherDate">-</div></div>
          <div class="cell"><div class="label">Ø§Ù„ÙˆÙ‚Øª</div><div id="voucherTime">-</div></div>
          <div class="cell"><div class="label">Ø±Ù‚Ù… Ø§Ù„Ø³Ù†Ø¯</div><div id="voucherNo">-</div></div>
          <div class="cell"><div class="label">Ø§Ù„Ø¹Ù…Ù„Ø©</div><div><span class="currency-symbol">&#xE900;</span></div></div>
        </div>
        <div class="brand-center">
          <img id="logo" alt="Logo" />
        </div>
        <div class="side-info" id="companyInfoAr"></div>
      </div>

      <div class="title-line">ğŸ”´ Ø³Ù†Ø¯ ØµØ±Ù</div>

      <div class="content-grid">
        <div class="fields" id="supplierFields">
          <!-- Header Row: ØµØ±ÙÙ†Ø§ Ù„Ù„Ø³ÙŠØ¯ (Full Width) -->
          <div class="row-header" id="rowName">
            <div class="label">ØµÙØ±ÙÙÙ Ù„Ù„Ø³ÙŠØ¯ / Ù„Ù„Ù…ÙˆØ±Ø¯</div>
            <div id="supplierName">-</div>
          </div>
          
          <!-- Grid Container: Two Columns -->
          <div class="grid-container">
            <div class="row" id="rowPhone"><div class="label">Ø±Ù‚Ù… Ø§Ù„Ø¬ÙˆØ§Ù„</div><div id="supplierPhone">-</div></div>
            <div class="row" id="rowVat"><div class="label">Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ø¶Ø±ÙŠØ¨ÙŠ</div><div id="supplierVat">-</div></div>
            <div class="row"><div class="label">Ø§Ù„Ù…Ø¨Ù„Øº ÙƒØªØ§Ø¨Ø©</div><div id="amountWords">-</div></div>
            <div class="row"><div class="label">ÙˆØ°Ù„Ùƒ Ø¹Ù†</div><div id="reason">-</div></div>
            <div class="row"><div class="label">Ø±Ù‚Ù… ÙØ§ØªÙˆØ±Ø© Ø§Ù„Ø´Ø±Ø§Ø¡</div><div id="invoiceNo">-</div></div>
            <div class="row" id="rowNote"><div class="label">Ù…Ù„Ø§Ø­Ø¸Ø§Øª</div><div id="paymentNote">-</div></div>
          </div>
        </div>
        
        <div class="amount-box">
          <div class="label">ğŸ’¸ Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…Ø¯ÙÙˆØ¹</div>
          <div class="value" id="amount">0.00</div>
          <div class="currency">Ø±ÙŠØ§Ù„ Ø³Ø¹ÙˆØ¯ÙŠ <span class="currency-symbol">&#xE900;</span></div>
        </div>
      </div>

      <div class="signature">
        <div class="box"><div class="line"></div>Ø§Ù„ØµØ§Ø±Ù</div>
        <div class="box"><div class="line"></div>Ø§Ù„Ù…Ø­Ø§Ø³Ø¨</div>
        <div class="box"><div class="line"></div>Ø§Ù„Ù…Ø¯ÙŠØ±</div>
      </div>

      <div class="footer-mini">Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…: <span id="userName">-</span> â€” ØªÙ… Ø§Ù„Ø¥ØµØ¯Ø§Ø±: <span id="printDate">-</span></div>
    </div>

    <script>
      const params = new URLSearchParams(window.location.search);
      const voucherData = {
        voucherNo: params.get('voucher_no') || '-',
        invoiceNo: params.get('invoice_no') || '-',
        amount: params.get('amount') || '0.00',
        userName: params.get('user_name') || '-',
        supplierId: params.get('supplier_id') || null,
        supplierName: params.get('supplier_name') || null,
        supplierPhone: params.get('supplier_phone') || null,
        supplierVat: params.get('supplier_vat') || params.get('supplier_tax') || null,
        reason: params.get('reason') || null,
        notes: params.get('notes') || null,
        date: params.get('date') || new Date().toISOString()
      };
      const api = (window.opener && window.opener.api) ? window.opener.api : (window.api || {});

      async function loadSettings(){
        try{
          const r = await (api.settings_get ? api.settings_get() : Promise.resolve(null));
          if(r && r.ok && r.item){
            const s = r.item;
            
            const logo = document.getElementById('logo');
            try{
              const lg = api.settings_image_get ? await api.settings_image_get() : null;
              if(lg && lg.ok && lg.base64){
                logo.src = `data:${lg.mime||'image/png'};base64,${lg.base64}`;
                logo.style.display = 'block';
              } else if(s.logo_path){
                if(String(s.logo_path).startsWith('assets/')){
                  logo.src = '../../../' + s.logo_path;
                } else {
                  logo.src = 'file:///' + String(s.logo_path||'').replace(/\\/g,'/');
                }
                logo.style.display = 'block';
              } else {
                logo.style.display = 'none';
              }
              const lw = Number(s.logo_width_px||0), lh = Number(s.logo_height_px||0);
              if(lw>0){ logo.style.width = lw + 'px'; }
              if(lh>0){ logo.style.height = lh + 'px'; }
            }catch(_){ logo.style.display = 'none'; }
            
            const arName = s.seller_legal_name || 'Ø§Ø³Ù… Ø§Ù„Ø´Ø±ÙƒØ©';
            const cells = [];
            cells.push(`<div class="cell"><div class="label">Ø§Ù„Ø´Ø±ÙƒØ©</div><div>${arName}</div></div>`);
            if(s.company_location){ cells.push(`<div class="cell"><div class="label">Ø§Ù„Ù…ÙˆÙ‚Ø¹</div><div>${s.company_location}</div></div>`); }
            if(s.mobile){ cells.push(`<div class="cell"><div class="label">Ø§Ù„Ø¬ÙˆØ§Ù„</div><div>${s.mobile}</div></div>`); }
            if(s.seller_vat_number){ cells.push(`<div class="cell"><div class="label">Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ø¶Ø±ÙŠØ¨ÙŠ</div><div>${s.seller_vat_number}</div></div>`); }
            if(s.commercial_register){ cells.push(`<div class="cell"><div class="label">Ø§Ù„Ø³Ø¬Ù„ Ø§Ù„ØªØ¬Ø§Ø±ÙŠ</div><div>${s.commercial_register}</div></div>`); }
            document.getElementById('companyInfoAr').innerHTML = cells.join('');
          }
        }catch(e){
          console.error('Failed to load settings:', e);
        }
      }

      function formatAmount(amount){
        return Number(amount || 0).toFixed(2);
      }

      function formatDate(dateStr){
        const d = new Date(dateStr);
        const day = String(d.getDate()).padStart(2, '0');
        const month = String(d.getMonth() + 1).padStart(2, '0');
        const year = d.getFullYear();
        return `${day}/${month}/${year}`;
      }

      function formatTime(dateStr){
        const d = new Date(dateStr);
        let hours = d.getHours();
        const minutes = String(d.getMinutes()).padStart(2, '0');
        const seconds = String(d.getSeconds()).padStart(2, '0');
        const ampm = hours >= 12 ? 'PM' : 'AM';
        hours = hours % 12;
        hours = hours ? hours : 12;
        const hoursStr = String(hours).padStart(2, '0');
        return `${hoursStr}:${minutes}:${seconds} ${ampm}`;
      }

      const ones = ['', 'ÙˆØ§Ø­Ø¯', 'Ø§Ø«Ù†Ø§Ù†', 'Ø«Ù„Ø§Ø«Ø©', 'Ø£Ø±Ø¨Ø¹Ø©', 'Ø®Ù…Ø³Ø©', 'Ø³ØªØ©', 'Ø³Ø¨Ø¹Ø©', 'Ø«Ù…Ø§Ù†ÙŠØ©', 'ØªØ³Ø¹Ø©'];
      const tens = ['', '', 'Ø¹Ø´Ø±ÙˆÙ†', 'Ø«Ù„Ø§Ø«ÙˆÙ†', 'Ø£Ø±Ø¨Ø¹ÙˆÙ†', 'Ø®Ù…Ø³ÙˆÙ†', 'Ø³ØªÙˆÙ†', 'Ø³Ø¨Ø¹ÙˆÙ†', 'Ø«Ù…Ø§Ù†ÙˆÙ†', 'ØªØ³Ø¹ÙˆÙ†'];
      const teens = ['Ø¹Ø´Ø±Ø©', 'Ø£Ø­Ø¯ Ø¹Ø´Ø±', 'Ø§Ø«Ù†Ø§ Ø¹Ø´Ø±', 'Ø«Ù„Ø§Ø«Ø© Ø¹Ø´Ø±', 'Ø£Ø±Ø¨Ø¹Ø© Ø¹Ø´Ø±', 'Ø®Ù…Ø³Ø© Ø¹Ø´Ø±', 'Ø³ØªØ© Ø¹Ø´Ø±', 'Ø³Ø¨Ø¹Ø© Ø¹Ø´Ø±', 'Ø«Ù…Ø§Ù†ÙŠØ© Ø¹Ø´Ø±', 'ØªØ³Ø¹Ø© Ø¹Ø´Ø±'];
      const hundreds = ['', 'Ù…Ø§Ø¦Ø©', 'Ù…Ø§Ø¦ØªØ§Ù†', 'Ø«Ù„Ø§Ø«Ù…Ø§Ø¦Ø©', 'Ø£Ø±Ø¨Ø¹Ù…Ø§Ø¦Ø©', 'Ø®Ù…Ø³Ù…Ø§Ø¦Ø©', 'Ø³ØªÙ…Ø§Ø¦Ø©', 'Ø³Ø¨Ø¹Ù…Ø§Ø¦Ø©', 'Ø«Ù…Ø§Ù†Ù…Ø§Ø¦Ø©', 'ØªØ³Ø¹Ù…Ø§Ø¦Ø©'];

      function numberToArabicWords(num) {
        if (num === 0) return 'ØµÙØ±';
        
        let result = '';
        
        if (num >= 1000) {
          const thousands = Math.floor(num / 1000);
          if (thousands === 1) result += 'Ø£Ù„Ù';
          else if (thousands === 2) result += 'Ø£Ù„ÙØ§Ù†';
          else if (thousands <= 10) result += ones[thousands] + ' Ø¢Ù„Ø§Ù';
          else result += convertHundreds(thousands) + ' Ø£Ù„Ù';
          num %= 1000;
          if (num > 0) result += ' Ùˆ';
        }
        
        result += convertHundreds(num);
        
        return result;
      }

      function convertHundreds(num) {
        let result = '';
        
        if (num >= 100) {
          result += hundreds[Math.floor(num / 100)];
          num %= 100;
          if (num > 0) result += ' Ùˆ';
        }
        
        if (num >= 20) {
          result += tens[Math.floor(num / 10)];
          num %= 10;
          if (num > 0) result += ' Ùˆ' + ones[num];
        } else if (num >= 10) {
          result += teens[num - 10];
        } else if (num > 0) {
          result += ones[num];
        }
        
        return result;
      }

      function amountToWords(amount) {
        const num = parseFloat(amount);
        const riyals = Math.floor(num);
        const halalas = Math.round((num - riyals) * 100);
        
        let text = numberToArabicWords(riyals) + ' Ø±ÙŠØ§Ù„';
        if (halalas > 0) {
          text += ' Ùˆ' + numberToArabicWords(halalas) + ' Ù‡Ù„Ù„Ø©';
        }
        text += ' Ø³Ø¹ÙˆØ¯ÙŠ ÙÙ‚Ø· Ù„Ø§ ØºÙŠØ±';
        
        return text;
      }

      function populateVoucher(){
        document.getElementById('voucherNo').textContent = String(voucherData.voucherNo||'-');
        document.getElementById('invoiceNo').textContent = String(voucherData.invoiceNo||'-');
        const amountValue = formatAmount(voucherData.amount);
        document.getElementById('amount').innerHTML = `[${amountValue}] <span class="currency-symbol">&#xE900;</span>`;
        document.getElementById('amountWords').textContent = amountToWords(voucherData.amount);
        document.getElementById('userName').textContent = voucherData.userName;
        document.getElementById('voucherDate').textContent = formatDate(voucherData.date);
        document.getElementById('voucherTime').textContent = formatTime(voucherData.date);
        document.getElementById('printDate').textContent = formatDate(new Date().toISOString()) + ' ' + formatTime(new Date().toISOString());
        
        const setRow = (id, val, target) => {
          const row = document.getElementById(id);
          const el = document.getElementById(target);
          if(val && String(val).trim() !== ''){ 
            if(row) row.style.display='flex'; 
            if(el) el.textContent = String(val); 
          } else { 
            if(row) row.style.display='none'; 
          }
        };
        
        setRow('rowName', voucherData.supplierName, 'supplierName');
        setRow('rowPhone', voucherData.supplierPhone, 'supplierPhone');
        setRow('rowVat', voucherData.supplierVat, 'supplierVat');
        setRow('rowNote', voucherData.notes, 'paymentNote');
        
        const rsn = voucherData.reason || (voucherData.invoiceNo ? ('Ø³Ø¯Ø§Ø¯ ÙØ§ØªÙˆØ±Ø© Ø´Ø±Ø§Ø¡ Ø±Ù‚Ù… ' + voucherData.invoiceNo) : (voucherData.notes||''));
        document.getElementById('reason').textContent = rsn || 'Ø³Ø¯Ø§Ø¯ Ù…Ø³ØªØ­Ù‚Ø§Øª Ù…ÙˆØ±Ø¯';
      }

      document.getElementById('exportBtn').addEventListener('click', async () => {
        try {
          const btn = document.getElementById('exportBtn');
          btn.textContent = 'Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØµØ¯ÙŠØ±...';
          btn.disabled = true;
          
          const root = document.documentElement.cloneNode(true);
          Array.from(root.querySelectorAll('script')).forEach(s=>s.remove());
          Array.from(root.querySelectorAll('.btn-container')).forEach(el=>el.remove());
          
          try{
            const img = root.querySelector('#logo');
            const settings = await window.api.settings_get();
            if(img && settings && settings.ok && settings.item && settings.item.logo_path){
              let absLogo = '';
              if(String(settings.item.logo_path).startsWith('assets/')){
                const rp = await window.api.resolve_path(settings.item.logo_path);
                if(rp && rp.ok){ 
                  absLogo = 'file:///' + String(rp.abs||'').replace(/\\/g,'/'); 
                }
              }else{
                absLogo = 'file:///' + String(settings.item.logo_path||'').replace(/\\/g,'/');
              }
              if(absLogo){ img.src = absLogo; }
            }
          }catch(_){ }
          
          const html = '<!doctype html>' + root.outerHTML;
          const fname = `PaymentVoucher_${voucherData.voucherNo}_Invoice_${voucherData.invoiceNo}.pdf`;
          const r = await window.opener?.api?.pdf_export(html, { 
            pageSize: 'A4',
            printBackground: true,
            saveMode: 'auto',
            filename: fname
          });
          
          if(!r || !r.ok){ 
            alert('ØªØ¹Ø°Ø± Ø¥Ù†Ø´Ø§Ø¡ PDF Ù„Ø³Ù†Ø¯ Ø§Ù„ØµØ±Ù'); 
            btn.textContent = 'ØªØµØ¯ÙŠØ± PDF';
            btn.disabled = false;
            return;
          }
          
          btn.textContent = 'ØªÙ… Ø§Ù„ØªØµØ¯ÙŠØ± âœ“';
          setTimeout(() => {
            btn.textContent = 'ØªØµØ¯ÙŠØ± PDF';
            btn.disabled = false;
          }, 2000);
        } catch (error) {
          console.error('PDF export error:', error);
          alert('Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„ØªØµØ¯ÙŠØ±: ' + error.message);
          const btn = document.getElementById('exportBtn');
          btn.textContent = 'ØªØµØ¯ÙŠØ± PDF';
          btn.disabled = false;
        }
      });

      (async function init(){
        await loadSettings();
        populateVoucher();
        // Ù„Ø§ Ø·Ø¨Ø§Ø¹Ø© ØªÙ„Ù‚Ø§Ø¦ÙŠØ© Ù„Ø³Ù†Ø¯ Ø§Ù„ØµØ±Ù â€” ÙŠØªÙ… Ø§Ù„Ø·Ø¨Ø§Ø¹Ø© ÙÙ‚Ø· Ø¹Ù†Ø¯ Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„Ø²Ø±
        // Ø¥Ø°Ø§ Ø§Ø­ØªØ¬Ù†Ø§ Ù„Ø§Ø­Ù‚Ø§Ù‹ Ø¯Ø¹Ù… Ø§Ù„Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠØ© ÙŠÙ…ÙƒÙ† ØªÙ…Ø±ÙŠØ± auto_print=1 ÙÙŠ Ø§Ù„Ø±Ø§Ø¨Ø·
        const params = new URLSearchParams(window.location.search);
        if(params.get('auto_print') === '1'){
          setTimeout(() => window.print(), 500);
        }
      })();
    </script>
  </body>
</html>